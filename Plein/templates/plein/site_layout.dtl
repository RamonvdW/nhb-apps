<!DOCTYPE html>
{% comment %}
                Copyright (c) 2019-2022 Ramon van der Winkel.
                All rights reserved.
                Licensed under BSD-3-Clause-Clear. See LICENSE file for details.
{% endcomment %}

{% comment %}

    Dit document is de blauwdruk voor alle pagina's van de site.
    Andere template's beginnen met een 'extends' op deze template
    en kunnen de volgende block tags gebruiken om delen te vervangen:
        extraheader   uitbreiding in de head sectie
        title         pagina titel instellen
        pagina        de body van de pagina

{% endcomment %}

{% load static %}

{% autoescape on %}

<html lang="nl">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{% block title %}{% endblock %}</title>
        <link rel="icon" href="{% static 'plein/logo_nhb_192x192.png' %}" sizes="192x192">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons+Round">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@500&display=swap">
        <link rel="stylesheet" href="{% static 'materialize-new-100.css' %}">
        {% block extraheader %}{% endblock %}
    </head>

    <body class="white">

        <!-- top navbar -->
        <div class="navbar-fixed">
            <nav class="nhb-grijs">
                <div class="nav-wrapper">
                    <!-- logo aan de linker kant -->
                    <a href="/plein/" class="brand-logo" style="left:0; transform:none; padding-left:7px; padding-top:7px">
                        <img src="{% static 'plein/logo_with_text_nhb_jubileum.png' %}" height="50" width="213" alt="NHB logo" style="z-index:1">
                    </a>

                    <!-- login/quick access knop aan de rechter kant -->
                    <ul id="nav-mobile" class="right">
                        <!--
                        <li><a class="btn-nhb-rood" href="{% url 'Competitie:kies' %}">Bondscompetities</a></li>
                        <li><a class="btn-nhb-rood" href="{% url 'Records:overzicht' %}">Records</a></li>
                        -->
                        {% if menu_voornaam %}
                            <li>
                                <a href="#" class="btn-nhb-rood dropdown-trigger" data-target="navbar-dropdown" style="position:relative; z-index:2">
                                    <i class="material-icons-round hide-on-small-only right" style="line-height:36px">expand_more</i>
                                    <i class="material-icons-round hide-on-med-and-up" style="line-height:36px">expand_more</i>
                                    <span class="hide-on-small-only">{{ menu_voornaam|escape }}</span></a>
                            </li>
                        {% elif not verberg_login_knop %}
                            <li><a href="{% url 'Account:login' %}" class="btn-nhb-rood" style="position:relative; z-index:2">Inloggen</a></li>
                        {% endif %}
                    </ul>
                </div>

                <ul id="navbar-dropdown" class="dropdown-content">
                    {% if menu_url_wissel_van_rol %}
                        <li class="divider"></li>
                        <li>
                            <a href="{{ menu_url_wissel_van_rol }}">
                                <i class="material-icons-round red-text">people_alt</i>Wissel van rol</a>
                        </li>
                    {% endif %}

                    {% if menu_url_admin_site %}
                        <li class="divider"></li>
                        <li>
                            <a href="{{ menu_url_admin_site }}">
                                <i class="material-icons-round red-text">build</i>Admin site</a>
                        </li>
                    {% endif %}

                    {% if menu_url_taken %}
                        <li class="divider"></li>
                        <li>
                            <a href="{{ menu_url_taken }}">
                                <i class="material-icons-round red-text">inbox</i>Taken <span class="new badge" data-badge-caption="open">{{ menu_aantal_open_taken }}</span>
                            </a>
                        </li>
                    {% endif %}

                    {% if menu_url_profiel %}
                        <li class="divider"></li>
                        <li>
                            <a href="{{ menu_url_profiel }}">
                                <i class="material-icons-round red-text">portrait</i>Mijn pagina</a>
                        </li>
                    {% endif %}

                    {% if menu_url_uitloggen %}
                        <li class="divider"></li>
                        <li>
                            <a href="{{ menu_url_uitloggen }}">
                                <i class="material-icons-round red-text">logout</i>Uitloggen</a>
                        </li>
                    {% endif %}
                </ul>
            </nav>

            <!-- screen-size indicator labels -->
            {% if menu_toon_schermgrootte %}
                <div style="position: fixed; left: 350px; top: 2px; font-size:10px">
                    <span class="hide-unless-small">Small</span>
                    <span class="hide-unless-medium">Medium</span>
                    <span class="hide-unless-large">Large</span>
                    <span class="hide-unless-xlarge">Extra-large</span>
                </div>
            {% endif %}
        </div>

        <!-- main contents -->
        <div class="nav-content-scrollbar">   <!-- css manipulates this to reduce padding on mobile -->

            {% block broodkruimels %}
                <div style="padding:10px">
                    <a class="broodkruimels-back" id="id_kruimels_back" href="javascript:history.go(-1)"><!--&lt;&nbsp;&nbsp;VORIGE-->
                        <i class="material-icons-round" style="font-size:19px;vertical-align:bottom;padding-bottom:2px;">arrow_back</i></a>

                    {% if kruimels %}
                        <a class="broodkruimels-link" href="{% url 'Plein:plein' %}">Plein</a>
                        {% for url, kruimel in kruimels %}
                            <span style="font-size:11px">&#12297;</span>
                            {% if not url %}
                                <span class="broodkruimels-nolink">{{ kruimel }}</span>
                            {% else %}
                                <a class="broodkruimels-link" href="{{ url }}">{{ kruimel }}</a>
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                </div>
            {% endblock %}

            <!-- echt pagina komt hier, vanuit de template -->
            {% block pagina %}{% endblock %}
        </div>

        <script src="{% static 'materialize-new-10_min.js' %}"></script>
        <script src="{% static 'site_layout-9_min.js' %}"></script>

        <!-- framework init, after everything has been loaded and instantiated -->
        <script type="application/javascript">
            document.addEventListener("DOMContentLoaded", function() {
                // accordeons
                const options = { inDuration: 100,    // default is 300
                                  outDuration: 100    // default is 300
                                };
                let elems;

                // console.log('history.length:', history.length)
                if (history.length < 2) {
                    // nothing to go back to
                    // typically happens when opening a manual page in a new window
                    const el = document.getElementById("id_kruimels_back");
                    el.style.display = "none"
                };

                elems = document.querySelectorAll(".collapsible");
                M.Collapsible.init(elems, options);

                // dropdown menu
                elems = document.querySelectorAll(".dropdown-trigger");
                M.Dropdown.init(elems, {coverTrigger: false, constrainWidth: false});

                // tooltips
                elems = document.querySelectorAll(".tooltipped");
                M.Tooltip.init(elems, { enterDelay: 1000 });

                // rolgordijnen
                elems = document.querySelectorAll("select");
                M.FormSelect.init(elems, {});

                // modals
                elems = document.querySelectorAll(".modal");
                M.Modal.init(elems, {'endingTop': '35%'});
            });

            // zoek alle tabellen met een zoekveld en trigger de oninput method
            // dit is noodzakelijk bij gebruik van de browser 'back' knop
            // anders zijn de tabellen niet meer gefiltreerd
            window.addEventListener("load", function()
            {
                //console.log("load!")
                const tables = document.getElementsByTagName("table");
                Array.from(tables).forEach(table => {
                    if (table.id !== "") {
                        const inputs = table.getElementsByTagName("input");
                        if (inputs.length >= 1) myTableFilter(inputs[0], table.id);
                    }
                });

                // evalueer de posities van de labels van de forms
                // zodat het label niet over het ingevulde input veld staat
                M.updateTextFields();
            });

            // resize listener, om het dropdown menu automatisch te verstoppen
            window.addEventListener('resize', function() {
                const elems = document.querySelectorAll(".dropdown-trigger");
                Array.from(elems).forEach(elem => {
                    const instance = M.Dropdown.getInstance(elem);
                    if (instance.isOpen) {
                        instance.close();
                    }
                });
            });
        </script>

    </body>
</html>

{% endautoescape %}
